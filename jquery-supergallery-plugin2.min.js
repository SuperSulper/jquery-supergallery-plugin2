(function(e){var t=function(t,n){n=n||{},this.o={selectors:{main:".main",thumb:".thumb",nextBtn:".nextBtn",prevBtn:".prevBtn"},animation:{type:"fade",duration:400,easing:"swing"},timer:{enable:!0,interval:3e3,stopOnHover:!0},other:{initialSelect:0,selectedClassName:"selected",loop:!0}},e.extend(!0,this.o,n),this.$target=e(t),this.$main=this.$target.find(this.o.selectors.main),this.$mainChildren=this.$main.children(),this.$thumb=this.$target.find(this.o.selectors.thumb),this.$thumbChildren=this.$thumb.children(),this.$nextBtn=this.$target.find(this.o.selectors.nextBtn),this.$prevBtn=this.$target.find(this.o.selectors.prevBtn),this.current=null,this.timerId=null,this.num=this.$mainChildren.length,this.init()};t.prototype.init=function(){var t=this,n="ontouchend"in window?"touchend":"click";if(!t.$main.length)throw"mainの数が0個です。セレクタが間違っているかもしれません。 this.o.selectors.main : "+t.o.selectors.main;if(!this.$mainChildren.length)throw"mainの中に何もありません！";return t.$main.css({position:"relative",overflow:"hidden"}),t.$mainChildren.css({position:"absolute"}).eq(t.o.other.initialSelect).css({display:"block"}).end().not(":eq("+t.o.other.initialSelect+")").css({display:"none"}),t.changeTo(t.o.other.initialSelect,!0),t.$thumbChildren.length&&t.$thumbChildren.each(function(r){e(this).on(n,function(){t.changeTo(r)})}),t.$nextBtn.length&&t.$nextBtn.on(n,function(){var e=t.current+1;e<t.num?t.changeTo(e):t.o.other.loop&&t.changeTo(0)}),t.$prevBtn.length&&t.$prevBtn.on(n,function(){var e=t.current-1;e>=0?t.changeTo(e):t.o.other.loop&&t.changeTo(t.num-1)}),t.o.timer.enable&&t.o.timer.interval&&t.setTimer(),t.o.timer.enable&&t.o.timer.interval&&t.o.timer.stopOnHover&&t.$target.hover(function(){t.clearTimer()},function(){t.setTimer()}),this},t.prototype.changeTo=function(t,n){var r=this;if(t===r.current)return!1;r.$target.trigger("pageChangeStart",t);var i=n?0:r.o.animation.duration,s=r.current,o=r.$mainChildren.eq(t),u=r.$mainChildren.eq(s);if(r.o.animation.type==="fade")o.stop(!0,!1).fadeTo(i,1),s!==null&&u.stop(!0,!1).fadeTo(i,0,function(){e(this).css({display:"none"}),r.$target.trigger("pageChangeEnd",t)});else{var a=o.width()*(s<t?1:-1),f=u.width()*(s<t?-1:1);n?(o.css({left:0,display:"block"}),s!==null&&u.css({display:"none"})):(o.css({left:a,display:"block"}).stop(!0,!1).animate({left:0},i,r.o.animation.easing),u.stop(!0,!1).animate({left:f},i,r.o.animation.easing,function(){u.css({display:"none"}),r.$target.trigger("pageChangeEnd",t)}))}r.$thumbChildren.eq(t).addClass(r.o.other.selectedClassName).end().not(":eq("+t+")").removeClass(r.o.other.selectedClassName),r.current=t},t.prototype.setTimer=function(){var e=this;e.timerId&&e.clearTimer(),e.timerId=setInterval(function(){var t=e.current+1;t<e.num?e.changeTo(t):e.o.other.loop?e.changeTo(0):e.clearTimer()},e.o.timer.interval)},t.prototype.clearTimer=function(){clearInterval(this.timerId)};var n=function(e,n){return new t(e,n)},r=function(n){return e(this).each(function(){new t(this,n)}),this};e.extend({supergallery:n}),e.fn.extend({supergallery:r})})(jQuery);