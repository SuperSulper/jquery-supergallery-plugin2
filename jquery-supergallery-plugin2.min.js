(function(e){var t=function(t,n){n=n||{},this.options={selectors:{main:"#main",thumb:"#thumb",nextBtn:"#nextBtn",prevBtn:"#prevBtn"},animation:{type:"fade",duration:400,easing:"swing"},timer:{enable:!0,interval:3e3,stopOnHover:!0},other:{initialSelect:0,selectedClassName:"selected",loop:!0}},e.extend(!0,this.options,n),this.$target=e(t),this.$main=this.$target.find(this.options.selectors.main),this.$mainChildren=this.$main.children(),this.$thumb=this.$target.find(this.options.selectors.thumb),this.$thumbChildren=this.$thumb.children(),this.$nextBtn=e(this.options.selectors.nextBtn),this.$prevBtn=e(this.options.selectors.prevBtn),this.current=null,this.timerId=null,this.num=this.$mainChildren.length,this.init()};t.prototype.init=function(){var t=this,n="ontouchend"in window?"touchend":"click";if(!this.$main.length)throw"mainの数が0個です。セレクタが間違っているかもしれません。 this.options.selectors.main : "+this.options.selectors.main;if(!this.$mainChildren.length)throw"mainの中に何もありません！";return this.$main.css({position:"relative",overflow:"hidden"}),this.$mainChildren.css({position:"absolute"}).eq(this.options.other.initialSelect).css({display:"block"}).end().not(":eq("+this.options.other.initialSelect+")").css({display:"none"}),this.changeTo(this.options.other.initialSelect,!0),this.$thumbChildren.length&&this.$thumbChildren.each(function(r){e(this).on(n,function(){t.changeTo(r)})}),this.$nextBtn.length&&this.$nextBtn.on(n,function(){var e=t.current+1;e<t.num?t.changeTo(e):t.options.other.loop&&t.changeTo(0)}),this.$prevBtn.length&&this.$prevBtn.on(n,function(){var e=t.current-1;e>=0?t.changeTo(e):t.options.other.loop&&t.changeTo(t.num-1)}),this.options.timer.enable&&this.options.timer.interval&&this.setTimer(),this.options.timer.enable&&this.options.timer.interval&&this.options.timer.stopOnHover&&this.$target.hover(function(){t.clearTimer()},function(){t.setTimer()}),this},t.prototype.changeTo=function(t,n){var r=this;if(t===this.current)return!1;this.$target.trigger("pageChangeStart",t);var i=n?0:this.options.animation.duration,s=this.current,o=this.$mainChildren.eq(t),u=this.$mainChildren.eq(s);if(this.options.animation.type==="fade")o.stop(!0,!1).fadeTo(i,1),s!==null&&u.stop(!0,!1).fadeTo(i,0,function(){e(this).css({display:"none"}),r.$target.trigger("pageChangeEnd",t)});else{var a=o.width()*(s<t?1:-1),f=u.width()*(s<t?-1:1);n?(o.css({left:0,display:"block"}),s!==null&&u.css({display:"none"})):(o.css({left:a,display:"block"}).stop(!0,!1).animate({left:0},i,r.options.animation.easing),u.stop(!0,!1).animate({left:f},i,r.options.animation.easing,function(){u.css({display:"none"}),r.$target.trigger("pageChangeEnd",t)}))}this.$thumbChildren.eq(t).addClass(this.options.other.selectedClassName).end().not(":eq("+t+")").removeClass(this.options.other.selectedClassName),this.current=t},t.prototype.setTimer=function(){var e=this;this.timerId&&this.clearTimer(),this.timerId=setInterval(function(){var t=e.current+1;t<e.num?e.changeTo(t):e.options.other.loop?e.changeTo(0):e.clearTimer()},this.options.timer.interval)},t.prototype.clearTimer=function(){clearInterval(this.timerId)};var n=function(e,n){return new t(e,n)},r=function(e){return new t(this,e)};e.extend({supergallery:n}),e.fn.extend({supergallery:r})})(jQuery);