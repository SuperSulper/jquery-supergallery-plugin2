/*! jQuery Supergallery Plugin2 2013-05-23
 *  Vertion : 1.2.3
 *  Dependencies : jQuery 1.8.0 - 1.9.1
 *  Author : Otto Kamiya (MegazalRock)
 *  Copyright (c) 2013 Otto Kamiya (MegazalRock);
 *  License : */
(function(e){var t=function(t,n){n=n||{},this.o={selectors:{main:".main",thumb:".thumb",nextBtn:".nextBtn",prevBtn:".prevBtn",indicator:".indicator"},animation:{type:"fade",duration:400,easing:"swing"},timer:{enable:!0,interval:3e3,stopOnHover:!0},other:{initialSelect:0,selectedClassName:"selected",loop:!0}},e.extend(!0,this.o,n),this.$target=e(t).data(this),this.$main=this.$target.find(this.o.selectors.main),this.$mainChildren=this.$main.children(),this.$thumb=this.$target.find(this.o.selectors.thumb),this.$thumbChildren=this.$thumb.children(),this.$indicator=this.$target.find(this.o.selectors.indicator),this.$indicatorChildren=this.$indicator.children(),this.$nextBtn=this.$target.find(this.o.selectors.nextBtn),this.$prevBtn=this.$target.find(this.o.selectors.prevBtn),this.current=null,this.timerId=null,this.num=this.$mainChildren.length,this.init()};t.prototype.init=function(){var t=this,n="ontouchend"in window?"touchend":"click";if(!t.$main.length)throw"mainの数が0個です。セレクタが間違っているかもしれません。 this.o.selectors.main : "+t.o.selectors.main;if(!this.$mainChildren.length)throw"mainの中に何もありません！";return t.$main.css({position:"relative",overflow:"hidden"}),t.$mainChildren.css({position:"absolute"}).eq(t.o.other.initialSelect).css({display:"block"}).end().not(":eq("+t.o.other.initialSelect+")").css({display:"none"}),t.changeTo(t.o.other.initialSelect,!0),t.$thumbChildren.length&&t.$thumbChildren.each(function(i){e(this).on(n,function(){t.changeTo(i)})}),t.$indicatorChildren.length&&t.$indicatorChildren.each(function(i){e(this).on(n,function(){t.changeTo(i)})}),t.$nextBtn.length&&t.$nextBtn.on(n,function(){var e=t.current+1;t.num>e?t.changeTo(e):t.o.other.loop&&t.changeTo(0)}),t.$prevBtn.length&&t.$prevBtn.on(n,function(){var e=t.current-1;e>=0?t.changeTo(e):t.o.other.loop&&t.changeTo(t.num-1)}),t.o.timer.enable&&t.o.timer.interval&&t.setTimer(),t.o.timer.enable&&t.o.timer.interval&&t.o.timer.stopOnHover&&t.$target.hover(function(){t.clearTimer()},function(){t.setTimer()}),this},t.prototype.changeTo=function(t,n){var i=this;if(t===i.current)return!1;i.$target.trigger("pageChangeStart",t);var o=n?0:i.o.animation.duration,r=i.current,a=i.$mainChildren.eq(t),s=i.$mainChildren.eq(r);if("fade"===i.o.animation.type)a.stop(!0,!1).fadeTo(o,1),null!==r&&s.stop(!0,!1).fadeTo(o,0,function(){e(this).css({display:"none"}),i.$target.trigger("pageChangeEnd",t)});else if("slide"===i.o.animation.type){var l=a.width()*(t>r?1:-1),h=s.width()*(t>r?-1:1);n?(a.css({left:0,display:"block"}),null!==r&&s.css({display:"none"})):(a.css({left:l,display:"block"}).stop(!0,!1).animate({left:0},o,i.o.animation.easing),s.stop(!0,!1).animate({left:h},o,i.o.animation.easing,function(){s.css({display:"none"}),i.$target.trigger("pageChangeEnd",t)}))}i.$mainChildren.eq(t).addClass(i.o.other.selectedClassName).end().not(":eq("+t+")").removeClass(i.o.other.selectedClassName),i.$indicatorChildren.eq(t).addClass(i.o.other.selectedClassName).end().not(":eq("+t+")").removeClass(i.o.other.selectedClassName),i.$thumbChildren.eq(t).addClass(i.o.other.selectedClassName).end().not(":eq("+t+")").removeClass(i.o.other.selectedClassName),i.current=t},t.prototype.setTimer=function(){var e=this;e.timerId&&e.clearTimer(),e.timerId=setInterval(function(){var t=e.current+1;e.num>t?e.changeTo(t):e.o.other.loop?e.changeTo(0):e.clearTimer()},e.o.timer.interval)},t.prototype.clearTimer=function(){clearInterval(this.timerId)};var n={supergallery:function(e,n){return new t(e,n)},superThumbGallery:function(t,n){n=n||{};var i={selectors:{main:".mainHolder",thumbPages:".thumbHolder",thumbBtns:".thumbBtn",selected:"selected"},thumbNum:5,main:{selectors:{thumb:""},timer:{enable:!0}},thumb:{selectors:{main:".thumbPages",thumb:"",nextBtn:"",prevBtn:""},animation:{type:"slide"},timer:{enable:!1}}};e.extend(!0,i,n);var o=[t,i.selectors.main].join(" "),r=[t,i.selectors.thumbPages].join(" "),a=e.supergallery(o,i.main),s=e.supergallery(r,i.thumb),l=e([t,i.selectors.thumbPages,i.thumb.selectors.main,i.selectors.thumbBtns].join(" "));return e(o).on("pageChangeStart",function(e,t){s.changeTo(Math.floor(t/i.thumbNum)),l.eq(t).addClass(i.selectors.selected.replace(".","")).end().not(":eq("+t+")").removeClass(i.selectors.selected.replace(".",""))}),e(t).hover(function(){a.clearTimer()},function(){a.setTimer()}),l.each(function(t){e(this).click(function(){a.changeTo(t)})}),{main:a,thumbPages:s}}},i={supergallery:function(n){return e(this).each(function(){new t(this,n)}),this}};e.extend(n),e.fn.extend(i)})(jQuery);